================================================================================
COMPREHENSIVE EMBEDDING AND SOLVING BENCHMARK
================================================================================
Testing: Formulations × Decompositions × Solvers
================================================================================

[1/6] Importing libraries...
  ✅ Imports done in 3.53s

[2/6] Getting target graph (QPU topology)...
  Using simulated Pegasus P16 topology
  ✅ Target graph: 5640 nodes, 40484 edges

================================================================================
TESTING PROBLEM SIZE: 25 units
================================================================================

[3/6] Farm Scenario (25 farms)...
  Building Farm CQM...
    Building Farm CQM (25 farms, 27 foods)...
    Solving Farm CQM with Gurobi...
      Solving CQM (1350 vars, 1377 constraints)...
        [1/5] Creating Gurobi model...
Set parameter Username
Set parameter LicenseID to value 2728803
Academic license - for non-commercial use only - expires 2026-10-28
        [2/5] Adding variables...
        [3/5] Building objective (675 linear, 0 quadratic)...
        [4/5] Adding 1377 constraints...
            Progress: 100/1377
            Progress: 200/1377
            Progress: 300/1377
            Progress: 400/1377
            Progress: 500/1377
            Progress: 600/1377
            Progress: 700/1377
            Progress: 800/1377
            Progress: 900/1377
            Progress: 1000/1377
            Progress: 1100/1377
            Progress: 1200/1377
            Progress: 1300/1377
        [5/5] Optimizing...
        ✓ Done in 0.01s (status=3)
  (Skipping BQM conversion for Farm - continuous variables not supported)

[4/6] Patch Scenario (25 patches)...
  Building Patch CQM...
    Building Patch CQM (25 patches, 27 foods)...
      Solving CQM (675 vars, 26 constraints)...
        [1/5] Creating Gurobi model...
        [2/5] Adding variables...
        [3/5] Building objective (675 linear, 0 quadratic)...
        [4/5] Adding 26 constraints...
        [5/5] Optimizing...
        ✓ Done in 0.00s (status=3)
  Converting Patch CQM to BQM...
    Converting Patch_CQM to BQM...
      Testing embedding: 760 vars, 236370 edges (density=0.409)
      ⊘ Skipped (too dense: 0.409 > 0.3)
      Solving BQM (760 vars, 236370 quad)...
        Creating model and optimizing...
        ✓ Done in 100.37s (status=9)
  Building Patch Direct BQM...
    Building Patch Direct BQM (25 patches, 27 foods)...
      Testing embedding: 675 vars, 8775 edges (density=0.019)
      Running minorminer (timeout=180s)...
      ✓ Embedded in 35.4s (chains: max=10, mean=4.5)
      Solving BQM (675 vars, 8775 quad)...
        Creating model and optimizing...
        ✓ Done in 1.81s (status=2)
  Building Patch Ultra-Sparse BQM...
    Building Patch Ultra-Sparse BQM (25 patches, 27 foods)...
      Testing embedding: 675 vars, 648 edges (density=0.001)
      Running minorminer (timeout=180s)...
Traceback (most recent call last):
  File "/Users/edoardospigarolo/Documents/OQI-UC002-DWave/@todo/comprehensive_embedding_and_solving_benchmark.py", line 879, in <module>
    results = run_comprehensive_benchmark()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/edoardospigarolo/Documents/OQI-UC002-DWave/@todo/comprehensive_embedding_and_solving_benchmark.py", line 757, in run_comprehensive_benchmark
    (patch_bqm_ultra, patch_bqm_ultra_meta, "UltraSparse_BQM"),
     ^^^^^^^^^^^^^^^
NameError: name 'patch_bqm_ultra' is not defined
      ✓ Embedded in 0.8s (chains: max=1, mean=1.0)
      Solving BQM (675 vars, 648 quad)...
        Creating model and optimizing...
        ✓ Done in 0.01s (status=2)

  Testing decompositions on embeddable formulations...


ERROR: name 'patch_bqm_ultra' is not defined
